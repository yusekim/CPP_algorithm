#include <iostream>
using namespace std;

int n, m, map[500][500];
int shapes[19][4][2] = {
	{{0,0},{1,0},{2,0},{3,0}},
	{{0,0},{0,1},{0,2},{0,3}},
	{{0,0},{0,1},{1,0},{1,1}},
	{{0,0},{1,0},{2,0},{2,1}},
	{{0,0},{1,0},{2,0},{2,-1}},
	{{0,0},{0,1},{0,2},{1,2}},
	{{0,0},{0,1},{0,2},{-1,2}},
	{{0,0},{0,1},{1,1},{2,1}},
	{{0,0},{0,-1},{1,-1},{2,-1}},
	{{0,0},{1,0},{1,1},{1,2}},
	{{0,0},{-1,0},{-1,1},{-1,2}},
	{{0,0},{1,0},{1,1},{2,1}},
	{{0,0},{1,0},{1,-1},{2,-1}},
	{{0,0},{0,1},{1,1},{1,2}},
	{{0,0},{0,1},{-1,1},{-1,2}},
	{{0,0},{0,1},{1,1},{0,2}},
	{{0,0},{0,1},{-1,1},{0,2}},
	{{0,0},{1,0},{1,1},{2,0}},
	{{0,0},{1,0},{1,-1},{2,0}},
};

int main()
{
	cin.tie(0)->sync_with_stdio(0);
	cin >> n >> m;
	for (int i = 0; i < n; i++)
		for (int j = 0; j < m; j++)
			cin >> map[i][j];
	int res = 0;
	for (int i = 0; i < n; i++)
	{
		for (int j = 0; j < m; j++)
		{
			for (int k = 0; k < 19; k++)
			{
				int sum = 0;
				bool check = true;
				for (int coord = 0; coord < 4; coord++)
				{
					int ni = i + shapes[k][coord][0];
					int nj = j + shapes[k][coord][1];
					if (ni < 0 || nj < 0 || ni >= n || nj >= m)
					{
						check = false;
						break;
					}
					sum += map[ni][nj];
				}
				if (check)
					res = max(res, sum);
			}
		}
	}
	cout << res << '\n';
}
